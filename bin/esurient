#!/usr/bin/env bash

#######################################################
# An example runner script for use with the fat jar
# produced by bin/build. Must be executed from a host
# with a Hadoop client installed at HADOOP_HOME and the
# *-site.xml files in HADOOP_CONF_DIR.


# Assumes we're executing from the bin/ dir. finds repo root dir
pushd ../$(dirname $0) >/dev/null
BASEDIR=`pwd -P`
popd

# Default if the user didn't provide a path to the fat jar
JARPATH="$BASEDIR/target/esurient-1.0-SNAPSHOT-jar-with-dependencies.jar" 

function green() {
  echo -e "\x1B[32m"
}

function white() {
  echo -e "\x1B[37m"
}

function off() {
  echo -e "\x1B[0m"
}

function usage() {
  green
  echo '[*] '
  white
  echo "Esurient Job Executing with args: $@"
  off
  HADOOP_CLASSPATH=`hadoop classpath` hadoop jar $JARPATH com.ereisman.esurient.hadoop.EsurientTool $@
  green
  echo '[*] '
  white
  echo 'Esurient job completed.'
  off
  echo
  echo
  exit 0
}

usage

